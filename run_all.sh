#!/bin/bash

# ุชุนููู ุงููุบุฉ ุงูุนุฑุจูุฉ
echo "๐ ุจุฏุก ุงูุชุดุบูู ุงูุชููุงุฆู ููุฃุฏุงุฉ ุงูุฃูููุฉ"
echo "==============================================="

# ุฏุงูุฉ ูุทุจุงุนุฉ ุงูุฑุณุงุฆู
echo_message() {
    echo "[$(date '+%H:%M:%S')] $1"
}

# 1. ุชุดุบูู ุฎุงุฏู Flask ูู ุฎูููุฉ
echo_message "[1/4] ุชุดุบูู ุฎุงุฏู Flask..."
nohup python app.py > flask.log 2>&1 &
FLASK_PID=$!
sleep 5

# 2. ุชุดุบูู ูุณุญ ุงูููุงูุน ุงูุญููููุฉ
echo_message "[2/4] ุชุดุบูู ูุณุญ ุงูููุงูุน ุงูุญููููุฉ..."
python test_gov.py
if [ $? -ne 0 ]; then
    echo_message "โ๏ธ ุชุญุฐูุฑ: test_gov.py ูู ููุชูู ุจูุฌุงุญ"
fi
sleep 2

# 3. ุชุดุบูู ูุณุญ Google Dorks
echo_message "[3/4] ุชุดุบูู ูุณุญ Google Dorks..."
python test_gov_dorks.py
if [ $? -ne 0 ]; then
    echo_message "โ๏ธ ุชุญุฐูุฑ: test_gov_dorks.py ูู ููุชูู ุจูุฌุงุญ"
fi
sleep 2

# 4. ุชุดุบูู ุงููุณุญ ุงูููุงุฆู
echo_message "[4/4] ุชุดุบูู ุงููุณุญ ุงูููุงุฆู..."
python terminal_scan.py https://www.gov.il
if [ $? -ne 0 ]; then
    echo_message "โ๏ธ ุชุญุฐูุฑ: terminal_scan.py ูู ููุชูู ุจูุฌุงุญ"
fi

echo ""
echo "==============================================="
echo "โ ุชู ุฅููุงู ุฌููุน ูุฑุงุญู ุงูุชุดุบูู!"
echo "==============================================="
echo "๐พ ุชู ุญูุธ ุฌููุน ุงููุชุงุฆุฌ ูู ูููุงุช JSON"
echo "๐ ุงูุฎุงุฏู ูุนูู ุนูู: http://localhost:5000"
echo "๐ ุณุฌูุงุช Flask: flask.log"
echo ""

# ุฅุจูุงุก ุงูุฎุงุฏู ูุนูู
echo "ูุฅููุงู ุงูุฎุงุฏู ุงุณุชุฎุฏู: kill $FLASK_PID"
echo "ูุนุฑู ุงูุนูููุฉ: $FLASK_PID"